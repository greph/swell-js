!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash/get"),require("lodash/toLower"),require("lodash/reduce"),require("lodash/isEmpty"),require("lodash/toNumber"),require("lodash/camelCase"),require("object-keys-normalizer"),require("lodash/set"),require("lodash/uniq"),require("lodash/find"),require("lodash/findIndex"),require("lodash/cloneDeep"),require("qs"),require("lodash/snakeCase"),require("deepmerge"),require("lodash/map"),require("isomorphic-fetch")):"function"==typeof define&&define.amd?define(["lodash/get","lodash/toLower","lodash/reduce","lodash/isEmpty","lodash/toNumber","lodash/camelCase","object-keys-normalizer","lodash/set","lodash/uniq","lodash/find","lodash/findIndex","lodash/cloneDeep","qs","lodash/snakeCase","deepmerge","lodash/map","isomorphic-fetch"],e):"object"==typeof exports?exports.swell=e(require("lodash/get"),require("lodash/toLower"),require("lodash/reduce"),require("lodash/isEmpty"),require("lodash/toNumber"),require("lodash/camelCase"),require("object-keys-normalizer"),require("lodash/set"),require("lodash/uniq"),require("lodash/find"),require("lodash/findIndex"),require("lodash/cloneDeep"),require("qs"),require("lodash/snakeCase"),require("deepmerge"),require("lodash/map"),require("isomorphic-fetch")):t.swell=e(t["lodash/get"],t["lodash/toLower"],t["lodash/reduce"],t["lodash/isEmpty"],t["lodash/toNumber"],t["lodash/camelCase"],t["object-keys-normalizer"],t["lodash/set"],t["lodash/uniq"],t["lodash/find"],t["lodash/findIndex"],t["lodash/cloneDeep"],t.qs,t["lodash/snakeCase"],t.deepmerge,t["lodash/map"],t["isomorphic-fetch"])}(window,(function(t,e,r,n,o,i,a,c,u,s,f,l,p,h,d,y,g){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="dist",r(r.s=36)}([function(t,e,r){"use strict";(function(t){r.d(e,"i",(function(){return D})),r.d(e,"l",(function(){return I})),r.d(e,"f",(function(){return q})),r.d(e,"n",(function(){return B})),r.d(e,"o",(function(){return L})),r.d(e,"p",(function(){return M})),r.d(e,"q",(function(){return N})),r.d(e,"s",(function(){return F})),r.d(e,"r",(function(){return $})),r.d(e,"m",(function(){return z})),r.d(e,"h",(function(){return J})),r.d(e,"g",(function(){return V})),r.d(e,"j",(function(){return G})),r.d(e,"a",(function(){return et})),r.d(e,"c",(function(){return X})),r.d(e,"u",(function(){return K}));var n=r(1),o=r.n(n),i=r(2),a=r.n(i),c=r(4),u=r.n(c),s=r(5),f=r.n(s),l=r(19),p=r(13),h=r.n(p);r.d(e,"k",(function(){return h.a}));var d=r(3),y=r.n(d);r.d(e,"e",(function(){return y.a}));var g=r(14),m=r.n(g);r.d(e,"t",(function(){return m.a}));var b=r(15),w=r.n(b);r.d(e,"d",(function(){return w.a}));r(16);var O=r(11),x=r.n(O),j=r(20),_=r.n(j),k=r(17),S=r.n(k);r.d(e,"b",(function(){return S.a}));var E=r(21),P=r.n(E),A=r(12);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var T={};function D(t,e){if(!e||"object"!==f()(e))return t;if(!t||"object"!==f()(t))return t;function r(t,e,r){var n=t.slice();return e.forEach((function(e,o){void 0===n[o]?n[o]=r.cloneUnlessOtherwiseSpecified(e,r):r.isMergeableObject(e)?n[o]=D(t[o],e,r):-1===t.indexOf(e)&&n.push(e)})),n}return P()(t,e,{arrayMerge:r})}function I(t){T=t}function q(){return T}function U(t){return t&&"object"===f()(t)&&!(t instanceof Array)}function B(t){var e=U(t)?Object.keys(t).reduce((function(e,r){if("$"===r[0]){var n=t[r];return delete t[r],R(R({},e),{},u()({},r,n))}return e}),{}):null,r=Object(A.normalizeKeys)(t,"camel");return e?R(R({},r),e):r}function L(t){return"string"==typeof t?t.split(".").map(x.a).join("."):t}function M(t){if(t){var e=JSON.parse(JSON.stringify(t)),r=U(e)?Object.keys(e).reduce((function(t,r){if("$"===r[0]){var n=e[r];return delete e[r],R(R({},t),{},u()({},r,n))}return t}),{}):null,n=Object(A.normalizeKeys)(e,Y);return r?R(R({},n),r):n}}function Y(t){return _()(t).replace(/\_([0-9])/g,"$1")}function N(t){return F($(t))}function F(t){return"string"==typeof t?t.replace(/^[/]+/,""):""}function $(t){return"string"==typeof t?t.replace(/[/]+$/,""):""}function z(t){return Object(l.stringify)(t,{depth:10,encode:!1})}function G(t,e,r){return t instanceof Array?t.reduce(e,r):r}function J(){return!("undefined"!=typeof window&&window&&window.document)}function V(t){return"function"==typeof t}function X(t,e,r){return{list:r.indexOf("list")>=0?function(r){return t("get",e,void 0,r)}:void 0,get:r.indexOf("get")>=0?function(r,n){return t("get",e,r,n)}:void 0}}function K(t,e,r){return Z.apply(this,arguments)}function Z(){return(Z=a()(o.a.mark((function t(e,r,n){var i,a,c,u,s=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.length>3&&void 0!==s[3]?s[3]:void 0,i=T.vaultUrl,a=T.timeout,c=H(),u="swell_vault_response_".concat(c),n={$jsonp:{method:e,callback:u},$data:n,$key:T.key},t.abrupt("return",new Promise((function(t,e){var o=document.createElement("script");o.type="text/javascript",o.src="".concat($(i),"/").concat(F(r),"?").concat(Q(n));var c=setTimeout((function(){window[u]({$error:"Request timed out after ".concat(a/1e3," seconds"),$status:500})}),a);window[u]=function(r){if(clearTimeout(c),r&&r.$error){var n=new Error(r.$error);n.code="request_error",n.status=r.$status,e(n)}else if(!r||r.$status>=300){var i=new Error("A connection error occurred while making the request");i.code="connection_error",i.status=r.$status,e(i)}else t(T.useCamelCase?B(r.$data):r.$data);delete window[u],o.parentNode.removeChild(o)},document.getElementsByTagName("head")[0].appendChild(o)})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return window.__swell_vault_request_id=window.__swell_vault_request_id||0,window.__swell_vault_request_id++,window.__swell_vault_request_id}function Q(t){var e=[],r=function(t,r){"function"==typeof r?r=r():null==r&&(r=""),e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)};for(var n in t)tt(n,t[n],r);return e.join("&").replace(" ","+")}var W=/\[\]$/;function tt(t,e,r){var n;if(e instanceof Array)for(var o=0;o<e.length;o++)W.test(t)?r(t,v):tt(t+"["+("object"===("undefined"==typeof v?"undefined":f()(v))&&null!=v?o:"")+"]",v,r);else if(e&&"object"===f()(e))for(n in e)tt(t+"["+n+"]",e[n],r);else r(t,e)}function et(e){return"undefined"!=typeof btoa?btoa(e):t.from(e).toString("base64")}}).call(this,r(28).Buffer)},function(t,e,r){t.exports=r(23)},function(t,e){function r(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,u,"next",t)}function u(t){r(a,o,i,c,u,"throw",t)}c(void 0)}))}}},function(e,r){e.exports=t},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e,r){var n=r(33),o=r(34),i=r(35);t.exports=function(t){return n(t)||o(t)||i()}},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=i},function(t,e){t.exports=a},function(t,e){t.exports=c},function(t,e){t.exports=u},function(t,e){t.exports=s},function(t,e){t.exports=f},function(t,e){t.exports=l},function(t,e,r){var n=r(24),o=r(25),i=r(26);t.exports=function(t,e){return n(t)||o(t,e)||i()}},function(t,e){t.exports=p},function(t,e){t.exports=h},function(t,e){t.exports=d},function(t,e){t.exports=y},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function l(){}function p(){}function h(){}var d={};d[o]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(_([])));g&&g!==e&&r.call(g,o)&&(d=g);var v=h.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=v.constructor=h,h.constructor=p,p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(v),c(v,a,"Generator"),v[o]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=g},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(30),o=r(31),i=r(32);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),o=(t=c(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|h(e.length);return 0===(t=c(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?c(t,0):p(t,e);if("Buffer"===e.type&&i(e.data))return p(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=c(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function p(t,e){var r=e.length<0?0:0|h(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(t).length;default:if(n)return Y(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return k(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,o){var i,a=1,c=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,c/=2,u/=2,r/=2}function s(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=r;i<c;i++)if(s(t,i)===s(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(r+u>c&&(r=c-u),i=r;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(s(t,i+p)!==s(e,p)){l=!1;break}if(l)return i}return-1}function b(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(2*a,2),16);if(isNaN(c))return a;t[r+a]=c}return a}function w(t,e,r,n){return F(Y(e,t.length-r),t,r,n)}function O(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return O(t,e,r,n)}function j(t,e,r,n){return F(N(e),t,r,n)}function _(t,e,r,n){return F(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function k(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,c,u,s=t[o],f=null,l=s>239?4:s>223?3:s>191?2:1;if(o+l<=r)switch(l){case 1:s<128&&(f=s);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&s)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(u=(15&s)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],a=t[o+2],c=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&c)&&(u=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return s(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return f(e),e<=0?c(t,e):void 0!==r?"string"==typeof n?c(t,e).fill(r,n):c(t,e).fill(r):c(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),c=Math.min(i,a),s=this.slice(n,o),f=t.slice(e,r),l=0;l<c;++l)if(s[l]!==f[l]){i=s[l],a=f[l];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return O(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return j(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=M(t[i]);return o}function C(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function q(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||q(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,i){return i||q(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);T(this,t,e,r,o-1,-o)}var i=0,a=1,c=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===c&&0!==this[e+i-1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);T(this,t,e,r,o-1,-o)}var i=r-1,a=1,c=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===c&&0!==this[e+i+1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=u.isBuffer(t)?t:Y(new u(t,n).toString()),c=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%c]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function N(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(29))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=s(t),a=n[0],c=n[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),f=0,l=c>0?a-4:a;for(r=0;r<l;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;2===c&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,u[f++]=255&e);1===c&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=0,c=r-o;a<c;a+=16383)i.push(f(t,a,a+16383>c?c:a+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=a.length;c<u;++c)n[c]=a[c],o[a.charCodeAt(c)]=c;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function f(t,e,r){for(var o,i,a=[],c=e;c<r;c+=3)o=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,o){var i,a,c=8*o-n-1,u=(1<<c)-1,s=u>>1,f=-7,l=r?o-1:0,p=r?-1:1,h=t[e+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=c;f>0;i=256*i+t[e+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=p,f-=8);if(0===i)i=1-s;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=s}return(h?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,c,u,s=8*i-o-1,f=(1<<s)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(c=0,a=f):a+l>=1?(c=(e*u-1)*Math.pow(2,o),a+=l):(c=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+h]=255&c,h+=d,c/=256,o-=8);for(a=a<<o|c,s+=o;s>0;t[r+h]=255&a,h+=d,a/=256,s-=8);t[r+h-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,r){"use strict";r.r(e);var n,o=r(1),i=r.n(o),a=r(18),c=r.n(a),u=r(4),s=r.n(u),f=r(2),l=r.n(f),p=(r(27),r(0)),h={createToken:(n=l()(i.a.mark((function t(e){var r,n,o,a,c,u,s,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,n=null,o=null,e||(r="Card details are missing in `swell.card.createToken(card)`",o=""),e.nonce||(this.validateNumber(e.number)||(r="Card number appears to be invalid",n="invalid_card_number",o="number"),e.exp&&(a=this.expiry(e.exp),e.exp_month=a.month,e.exp_year=a.year),this.validateExpiry(e.exp_month,e.exp_year)||(r="Card expiry appears to be invalid",n="invalid_card_expiry",o="exp_month"),this.validateCVC(e.cvc)||(r="Card CVC code appears to be invalid",n="invalid_card_cvc",o="exp_cvc")),!r){t.next=11;break}throw(c=new Error(r)).code=n||"invalid_card",c.status=402,c.param=o,c;case 11:return t.next=13,Object(p.u)("post","/tokens",e);case 13:if(!(u=t.sent).errors){t.next=21;break}throw s=Object.keys(u.errors)[0],(f=new Error(u.errors[s].message||"Unknown error")).code="vault_error",f.status=402,f.param=s,f;case 21:return t.abrupt("return",u);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)}),expiry:function(t){if(t&&t.month&&t.year)return t;var e=new String(t).split(/[\s\/\-]+/,2),r=e[0],n=e[1];n&&2===n.length&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().substring(0,2)+n);return{month:~~r,year:~~n}},types:function(){var t,e,r,n;for(e={},t=r=40;r<=49;t=++r)e[t]="Visa";for(t=n=50;n<=59;t=++n)e[t]="MasterCard";return e[34]=e[37]="American Express",e[60]=e[62]=e[64]=e[65]="Discover",e[35]="JCB",e[30]=e[36]=e[38]=e[39]="Diners Club",e},type:function(t){return this.types()[t.slice(0,2)]||"Unknown"},luhnCheck:function(t){var e,r,n,o,i,a;for(n=!0,o=0,i=0,a=(r=(t+"").split("").reverse()).length;i<a;i++)e=r[i],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),o+=e;return o%10==0},validateNumber:function(t){return(t=(t+"").replace(/\s+|-/g,"")).length>=10&&t.length<=16&&this.luhnCheck(t)},validateExpiry:function(t,e){var r,n;return t=String(t).trim(),e=String(e).trim(),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(parseInt(t,10)<=12&&(n=new Date(e,t),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)))},validateCVC:function(t){return t=String(t).trim(),/^\d+$/.test(t)&&t.length>=3&&t.length<=4}};function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t){if(!Object(p.h)()){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}}function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(p.h)()){var n=new Date;n.setDate(n.getDate()+7),(r=y({path:"/",expires:n.toUTCString()},r)).expires&&r.expires.toUTCString&&(r.expires=r.expires.toUTCString());var o=encodeURIComponent(t)+"="+encodeURIComponent(e);for(var i in r){o+="; "+i;var a=r[i];!0!==a&&(o+="="+a)}document.cookie=o}}var m=r(5),b=r.n(m);function w(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _={};function k(){}var S,E,P={values:function(t){var e=t.model,r=t.id,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(k.apply(void 0,["cache.values"].concat(Array.prototype.slice.call(arguments))),void 0===n)return Object(p.e)(_,"".concat(e,".").concat(r),{});for(var o in n)Object(p.k)(_,"".concat(e,".").concat(r,".").concat(o),n[o])},preset:function(t){k.apply(void 0,["cache.preset"].concat(Array.prototype.slice.call(arguments)));var e=this.values(t),r=e.presets,n=void 0===r?[]:r;n.push(t),this.values(t,{presets:n})},set:function(t){k.apply(void 0,["cache.set"].concat(Array.prototype.slice.call(arguments)));var e=t.model,r=t.id,n=t.path,o=t.value,i=this.values(t),a=i.data,c=void 0===a?{}:a,u=i.record;i.presets;if(null!==r){if(void 0===u)return this.preset(t);c=Object(p.i)(u||{},c);var s=Object(p.f)(),f=s.useCamelCase;if(f&&o&&"object"===b()(o)&&(o=Object(p.n)(o)),n||o instanceof Array){var l=j({},c||{}),h=f?Object(p.o)(n):n;Object(p.k)(l,h||"",o),c=l}else o&&"object"===b()(o)?(c=c||{},c=Object(p.i)(c,o)):c=o;this.values(t,{data:c}),void 0!==_[e][r]&&(_[e][r]=JSON.parse(JSON.stringify(_[e][r])))}},get:function(t,e){k.apply(void 0,["cache.get"].concat(Array.prototype.slice.call(arguments)));var r=this.values({model:t,id:e}),n=r.data,o=r.recordTimer;if(k.apply(void 0,["cache.get:data+recordTimer"].concat(Array.prototype.slice.call(arguments))),o)return n},setRecord:function(t,e){var r=this;k.apply(void 0,["cache.setRecord"].concat(Array.prototype.slice.call(arguments)));var n=this.values(e),o=n.recordTimer,i=n.presets;if(o&&clearTimeout(o),o=setTimeout((function(){r.values(e,{record:void 0,recordTimer:void 0})}),5e3),this.values(e,{record:t,recordTimer:o}),i){var a,c=w(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;this.set(u)}}catch(t){c.e(t)}finally{c.f()}this.values(e,{presets:void 0})}var s=this.get(e.model,e.id);return void 0!==s?s:t},getFetch:(S=l()(i.a.mark((function t(e,r,n){var o,a,c=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k.apply(void 0,["cache.getFetch"].concat(Array.prototype.slice.call(c))),void 0===(o=this.get(e,r))){t.next=4;break}return t.abrupt("return",o);case 4:return t.next=6,n();case 6:return a=t.sent,t.abrupt("return",this.setRecord(a,{model:e,id:r}));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return S.apply(this,arguments)}),clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;k.apply(void 0,["cache.clear"].concat(Array.prototype.slice.call(arguments))),t?e?Object(p.k)(_,"".concat(t,".").concat(e),void 0):Object(p.k)(_,t,void 0):_={}}},A=r(6),C=r.n(A);function R(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!t.options)return{};var r=e?t.options.filter(e):t.options;return Object(p.j)(r,(function(t,e){var r,n=Object(p.j)(e.values,(function(t,e){var r;return I(I({},t),{},(r={},s()(r,e.id,I(I({},e),{},{id:e.id})),s()(r,e.name,I(I({},e),{},{id:e.id})),r))}),{});return I(I({},t),{},(r={},s()(r,e.id,I(I({},e),{},{values:n})),s()(r,e.name,I(I({},e),{},{values:n})),r))}),{})}function U(t){var e=t||[];if(t&&"object"===b()(t)&&!(t instanceof Array))for(var r in e=[],t)e.push({id:r,value:t[r]});return e instanceof Array?e.map((function(t){return{id:t.id||t.name,value:t.value}})):e}function B(t,e){if(e.length>0){var r=t.variants&&t.variants.results;if(r.length>0){var n,o=R(r);try{for(o.s();!(n=o.n()).done;){var i,a=n.value,c=!0,u=R(e);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(a.option_value_ids&&-1===a.option_value_ids.indexOf(s)){c=!1;break}}}catch(t){u.e(t)}finally{u.f()}if(c)return a}}catch(t){o.e(t)}finally{o.f()}}}return null}function L(t,e){var r,n=E.useCamelCase?Object(p.p)(t):t,o=I(I({},n),{},{price:n.price||0,sale_price:n.sale_price,orig_price:n.orig_price,stock_status:n.stock_status}),i=0,a=[],c=U(e),u=q(n),s=R(c);try{for(s.s();!(r=s.n()).done;){var f=r.value;u[f.id]&&u[f.id].values[f.value]&&(u[f.id].variant?a.push(u[f.id].values[f.value].id):i+=u[f.id].values[f.value].price||0)}}catch(t){s.e(t)}finally{s.f()}if(a.length>0){var l=B(n,a);l&&(o.price=l.price||0,o.sale_price=l.sale_price||n.sale_price,o.orig_price=l.orig_price||n.orig_price,o.stock_status=l.stock_status||n.stock_status)}return i>0&&(o.price+=i,o.sale_price&&(o.sale_price+=i),o.orig_price&&(o.orig_price+=i)),void 0===o.sale_price&&delete o.sale_price,void 0===o.orig_price&&delete o.orig_price,E.useCamelCase?Object(p.n)(o):o}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e.attributes||void 0===e.attributes)&&N(t),n=(e.categories||void 0===e.categories)&&Y(t),o=(e.price||void 0===e.price)&&F(t),i=[];return o&&i.push({id:"price",label:"Price",type:"range",options:[{value:o.min,label:o.min},{value:o.max,label:o.max}],interval:o.interval}),n&&n.length>0&&i.push({id:"category",label:"Category",type:"select",options:n.map((function(t){return{value:t.slug,label:t.name}}))}),r&&r.length>0&&(i=[].concat(C()(i),C()(Object(p.j)(r,(function(t,e){return[].concat(C()(t),C()("category"!==e.id&&"price"!==e.id&&e.values instanceof Array&&e.values.length>0?[{id:e.id,label:e.name,type:"select",options:e.values.map((function(t){return{value:t,label:t}}))}]:[]))}),[])))),i}function Y(t){var e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array){var n,o=R(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.categories){var a,c=R(i.categories);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u)Object(p.d)(e,{id:u.id})||e.push(u)}}catch(t){c.e(t)}finally{c.f()}}}}catch(t){o.e(t)}finally{o.f()}}return e}function N(t){var e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array){var n,o=R(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.attributes)for(var a in i.attributes)if(i.attributes[a]){var c=i.attributes[a].value,u=Object(p.d)(e,{id:a});u?u.values=Object(p.t)([].concat(C()(u.values),C()(c instanceof Array?c:[c]))):e.push(I(I({},i.attributes[a]),{},{value:void 0,values:C()(c instanceof Array?c:[c])}))}}}catch(t){o.e(t)}finally{o.f()}}return e}function F(t){var e,r,n,o=t&&t.results||(t.id?[t]:t);if(o instanceof Array){var i,a=R(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;(void 0===r||c.price>r)&&(r=Math.ceil(c.price)),(void 0===e||c.price<e)&&(e=Math.floor(c.price))}}catch(t){a.e(t)}finally{a.f()}}if(e===r)return null;for((n=Math.ceil((r-e)/10)||1)>1e3?n=1e3:n>100?n=100:n>10&&(n=10),r%n>0&&(r=n+r-r%n),e%n>0&&(e-=e%n);(r-e)/n%1>0;)r++;return{min:e,max:r,interval:n}}var $=function(t,e){E=e;var r=Object(p.c)(t,"/products",["list","get"]),n=r.get;return{get:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return P.getFetch("products",t,(function(){return n.apply(void 0,[t].concat(r))}))},list:r.list,variation:L,categories:Y,attributes:N,priceRange:F,filters:M}};function z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?z(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var J=function(t,e){return{state:null,order:null,settings:null,requested:!1,pendingRequests:[],cacheClear:null,requestStateChange:(u=l()(i.a.mark((function e(r,n,o,a){var c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.requestStateSync(l()(i.a.mark((function e(){var u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r,n,o,a);case 2:if(!(u=e.sent)||!u.errors){e.next=5;break}return e.abrupt("return",u);case 5:return c.state=u,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(t,e,r,n){return u.apply(this,arguments)}),requestStateSync:(c=l()(i.a.mark((function t(e){var r,n,o,a=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.state){t.next=6;break}return t.next=3,e();case 3:return t.abrupt("return",t.sent);case 6:if(!this.requested){t.next=8;break}return t.abrupt("return",new Promise((function(t){a.pendingRequests.push({handler:e,resolve:t})})));case 8:return this.requested=!0,t.next=11,e();case 11:for(r=t.sent,this.requested=!1;this.pendingRequests.length>0;)n=this.pendingRequests.shift(),o=n.handler,(0,n.resolve)(o());return t.abrupt("return",r);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),get:function(){var t;return this.cacheClear&&(this.cacheClear=null,t={$cache:!1}),this.requestStateChange("get","/cart",void 0,t)},clearCache:function(){this.cacheClear=!0},getItemData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(p.b)(t);return"string"==typeof t&&(r=G(G({},e||{}),{},{product_id:t})),r&&r.options&&(r.options=U(r.options)),r},addItem:function(t,e){return this.requestStateChange("post","/cart/items",this.getItemData(t,e))},updateItem:function(t,e){return this.requestStateChange("put","/cart/items/".concat(t),this.getItemData(e))},setItems:function(t){var e=t;return e&&e.map&&(e=e.map(this.getItemData)),this.requestStateChange("put","/cart/items",e)},removeItem:function(t){return this.requestStateChange("delete","/cart/items/".concat(t))},recover:function(t){return this.requestStateChange("put","/cart/recover/".concat(t))},update:function(t){var e=t;return e.items&&e.items.map&&(e=G(G({},e),{},{items:e.items.map(this.getItemData)})),this.requestStateChange("put","/cart",e)},applyCoupon:function(t){return this.requestStateChange("put","/cart/coupon",{code:t})},removeCoupon:function(){return this.requestStateChange("delete","/cart/coupon")},applyGiftcard:function(t){return this.requestStateChange("post","/cart/giftcards",{code:t})},removeGiftcard:function(t){return this.requestStateChange("delete","/cart/giftcards/".concat(t))},getShippingRates:(a=l()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.requestStateChange("get","/cart/shipment-rating");case 2:return t.abrupt("return",this.state[e.useCamelCase?"shipmentRating":"shipment_rating"]);case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),submitOrder:(o=l()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("post","/cart/order");case 2:if(!(r=e.sent).errors){e.next=5;break}return e.abrupt("return",r);case 5:return this.state=null,this.order=r,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),getOrder:(n=l()(i.a.mark((function e(){var r,n,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=o.length>0&&void 0!==o[0]?o[0]:void 0)){e.next=7;break}return e.next=4,t("get","/cart/order",{checkout_id:r});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,t("get","/cart/order");case 9:n=e.sent;case 10:return this.order=n,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),getSettings:(r=l()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("get","/cart/settings");case 2:return this.settings=e.sent,e.abrupt("return",this.settings);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})};var r,n,o,a,c,u};var V=function(t){return{state:null,requestStateChange:(e=l()(i.a.mark((function e(r){var n,o,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.method,o=r.url,a=r.data,e.next=3,t(n,o,null,a);case 3:if(!(c=e.sent)||!c.errors){e.next=6;break}return e.abrupt("return",c);case 6:return e.abrupt("return",this.state=c);case 7:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)}),get:function(t){return this.requestStateChange({method:"get",url:"/account",data:t})},create:function(t){return this.requestStateChange({method:"post",url:"/account",data:t})},update:function(t){return this.requestStateChange({method:"put",url:"/account",data:t})},login:function(t,e){return this.requestStateChange({method:"post",url:"/account/login",data:{email:t,password:e}})},logout:function(){return this.state=null,t("post","/account/logout")},recover:function(e){return t("post","/account/recover",e)},listAddresses:function(e){return t("get","/account/addresses",e)},createAddress:function(e){return t("post","/account/addresses",e)},updateAddress:function(e,r){return t("put","/account/addresses/".concat(e),r)},deleteAddress:function(e){return t("delete","/account/addresses/".concat(e))},listCards:function(e){return t("get","/account/cards",e)},createCard:function(e){return t("post","/account/cards",e)},updateCard:function(e,r){return t("put","/account/cards/".concat(e),r)},deleteCard:function(e){return t("delete","/account/cards/".concat(e))},listOrders:function(e){return t("get","/account/orders",e)},getOrder:function(e){return t("get","/account/orders/".concat(e))},getAddresses:function(e){return t("get","/account/addresses",e)},getCards:function(e){return t("get","/account/cards",e)},getOrders:function(e){return t("get","/account/orders",e)}};var e};var X=function(t){var e=Object(p.c)(t,"/categories",["list","get"]),r=e.get;return{get:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return P.getFetch("categories",t,(function(){return r.apply(void 0,[t].concat(n))}))},list:e.list}};var K=function(t){var e=Object(p.c)(t,"/attributes",["list","get"]),r=e.get;return{get:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return P.getFetch("attributes",t,(function(){return r.apply(void 0,[t].concat(n))}))},list:e.list}};var Z=function(t){return{get:function(e,r){return t("get","/subscriptions",e,r)},getCleanData:function(t){return t&&t.options&&(t.options=U(t.options)),t.items&&t.items.map&&(t.items=t.items.map((function(t){return t.options&&(t.options=U(t.options)),t}))),t},create:function(e){return t("post","/subscriptions",this.getCleanData(e))},update:function(e,r){return t("put","/subscriptions/".concat(e),this.getCleanData(r))},addItem:function(e,r){return t("post","/subscriptions/".concat(e,"/items"),this.getCleanData(r))},setItems:function(e,r){return r&&r.map&&(r=r.map(this.getCleanData)),t("put","/subscriptions/".concat(e,"/items"),r)},updateItem:function(e,r,n){return t("put","/subscriptions/".concat(e,"/items/").concat(r),this.getCleanData(n))},removeItem:function(e,r){return t("delete","/subscriptions/".concat(e,"/items/").concat(r))}}};function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Q=function(t,e){return{get:function(r,n,o){return P.getFetch("content_".concat(r),n,(function(){return t("get","/content/".concat(r),n,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({$preview:e.previewContent},o||{}))}))},list:function(e,r){return t("get","/content/".concat(e),void 0,r)}}};var W=function(t,e){return{state:null,menuState:null,paymentState:null,sessionState:null,refresh:function(){return this.state=null,this.menuState=null,this.paymentState=null,this.sessionState=null,this.get()},getState:function(e,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.id,a=void 0===i?void 0:i,c=o.def,u=void 0===c?void 0:c,s=o.refresh,f=void 0!==s&&s;return this[r]&&!f||(this[r]=t("get",e)),this[r]&&"function"==typeof this[r].then?this[r].then((function(t){return n[r]=t,a?Object(p.e)(t,a,u):t})):a?Object(p.e)(this[r],a,u):this[r]},findState:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.where,o=void 0===n?void 0:n,i=r.def,a=void 0===i?void 0:i,c=this.getState(t,e);return c&&"function"==typeof c.then?c.then((function(t){return Object(p.d)(t,o)||a})):Object(p.d)(c,o)||a},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.getState("/settings","state",{id:t,def:e})},set:function(t){var r=t.model,n=t.path,o=t.value,i=r?"".concat(r.replace(/s$/,""),"State"):"state",a=e.useCamelCase,c={};"menus"===r?void 0!==n?Object(p.k)(c,n||"",o):c=o:Object(p.k)(c,n||"",o),a&&(c=Object(p.n)(c)),this[i]=Object(p.i)(this[i],c)},menus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.findState("/settings/menus","menuState",{where:{id:t},def:e})},payments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.getState("/settings/payments","paymentState",{id:t,def:e})},session:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.getState("/session","sessionState",{id:t,def:e})},load:(r=l()(i.a.mark((function e(){var r,n,o,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("get","/settings/all");case 3:r=e.sent,n=r.settings,o=r.menus,a=r.payments,c=r.session,this.state=n,this.menuState=o,this.paymentState=a,this.sessionState=c,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Swell: unable to loading settings (".concat(e.t0,")"));case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return r.apply(this,arguments)})};var r},tt=r(3),et=r.n(tt),rt=r(7),nt=r.n(rt),ot=r(8),it=r.n(ot),at=r(9),ct=r.n(at),ut=r(22),st=r.n(ut),ft=r(10),lt=r.n(ft);function pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var dt={city:"city",country:"country",line1:"address1",line2:"address2",postal_code:"zip",state:"state"},yt={name:"name",phone:"phone"};function gt(t){var e=t.account,r=void 0===e?{}:e,n=t.billing,o=t.shipping,i=ht(ht(ht(ht({},r.shipping),r.billing),o),n),a=function(t){return it()(t,(function(t,e,r){var n=i[e];return n&&(t[r]=n),t}),{})},c=a(yt);if(!ct()(c)){var u=a(dt);return ht(ht({},c),ct()(u)?{}:{address:u})}}function vt(t){var e=nt()(et()(t,"currency","eur")),r=st()(t.items,(function(t){return{type:"sku",description:t.product.name,quantity:t.quantity,currency:e,amount:Math.round(100*lt()(t.price_total-t.discount_total))}})),n=et()(t,"tax_included_total");n&&r.push({type:"tax",description:"Taxes",currency:e,amount:Math.round(100*lt()(n))});var o=et()(t,"shipping",{}),i=et()(t,"shipment_total",{});return o.price&&r.push({type:"shipping",description:o.service_name,currency:e,amount:Math.round(100*lt()(i))}),r}function mt(t,e){var r=function(t,e){return it()(t,(function(t,r,n){var o=e[r];return o&&(t[n]=o),t}),{})};t.klarna=ht(ht({},t.klarna),r({shipping_first_name:"first_name",shipping_last_name:"last_name"},e.shipping));var n=r({phone:"phone"},e.shipping),o=r(dt,e.shipping);(n||o)&&(t.source_order.shipping=ht(ht({},n||{}),o?{address:o}:{})),t.klarna=ht(ht({},t.klarna),r({first_name:"first_name",last_name:"last_name"},e.billing||et()(e,"account.billing")||e.shipping));var i=r({email:"email"},e.account),a=r(dt,e.billing||et()(e,"account.billing")||e.shipping);(i||a)&&(t.owner=ht(ht({},i||{}),a?{address:a}:{}))}function bt(t,e){var r=e.account,n=void 0===r?{}:r,o=e.billing,i=e.shipping,a=ht(ht(ht(ht({},n.shipping),n.billing),i),o),c=function(t,e){return it()(t,(function(t,r,n){var o=e[r];return o&&(t[n]=o),t}),{})}(dt,a);t.owner=ht(ht({email:n.email,name:a.name||n.name},a.phone?{phone:a.phone}:n.phone?{phone:n.phone}:{}),ct()(c)?{}:{address:c})}function wt(t,e,r){return Ot.apply(this,arguments)}function Ot(){return(Ot=l()(i.a.mark((function t(e,r,n){var o,a,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=gt(n),t.next=3,e.createPaymentMethod(ht({type:"card",card:r},o?{billing_details:o}:{}));case 3:return a=t.sent,c=a.error,u=a.paymentMethod,t.abrupt("return",c?{error:c}:{token:u.id,last4:u.card.last4,exp_month:u.card.exp_month,exp_year:u.card.exp_year,brand:u.card.brand,address_check:u.card.checks.address_line1_check,cvc_check:u.card.checks.cvc_check,zip_check:u.card.checks.address_zip_check});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xt(t,e){return jt.apply(this,arguments)}function jt(){return(jt=l()(i.a.mark((function t(e,r){var n,o,a=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},o=gt(n),t.next=4,e.createPaymentMethod(ht({type:"ideal",ideal:r},o?{billing_details:o}:{}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(t,e){return kt.apply(this,arguments)}function kt(){return(kt=l()(i.a.mark((function t(e,r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return mt(n={type:"klarna",flow:"redirect",amount:Math.round(100*et()(r,"grand_total",0)),currency:nt()(et()(r,"currency","eur")),klarna:{product:"payment",purchase_country:et()(r,"settings.country","DE")},source_order:{items:vt(r)},redirect:{return_url:window.location.href}},r),t.next=4,e.createSource(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function St(t,e){return Et.apply(this,arguments)}function Et(){return(Et=l()(i.a.mark((function t(e,r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bt(n={type:"bancontact",amount:Math.round(100*et()(r,"grand_total",0)),currency:nt()(et()(r,"currency","eur")),redirect:{return_url:window.location.href}},r),t.next=4,e.createSource(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ct={},Rt={},Tt={};function Dt(t){return{params:null,methodSettings:null,methods:(a=l()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.methodSettings){e.next=2;break}return e.abrupt("return",this.methodSettings);case 2:return e.next=4,t("get","/payment/methods");case 4:return r=e.sent,e.abrupt("return",this.methodSettings=r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),createElements:(o=l()(i.a.mark((function e(r){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.params=r||{},e.next=3,J.methods(t).get();case 3:if(n=e.sent){e.next=6;break}throw new Error("Cart not found");case 6:return e.next=8,W.methods(t).payments();case 8:if(!(o=e.sent).error){e.next=11;break}throw new Error(o.error);case 11:return e.next=13,It(t,n,o,this.params);case 13:case"end":return e.stop()}}),e,this)}))),function(t){return o.apply(this,arguments)}),tokenize:(n=l()(i.a.mark((function e(r){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.methods(t).get();case 2:if(n=e.sent){e.next=5;break}throw new Error("Cart not found");case 5:return e.next=7,W.methods(t).payments();case 7:if(!(o=e.sent).error){e.next=10;break}throw new Error(o.error);case 10:return e.next=12,Nt(t,r||this.params,o,n);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)}))),function(t){return n.apply(this,arguments)}),createIntent:(r=l()(i.a.mark((function t(e){var r,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.u)("post","/intent",e);case 2:if(!(r=t.sent).errors){t.next=10;break}throw n=Object.keys(r.errors)[0],(o=new Error(r.errors[n].message||"Unknown error")).code="vault_error",o.status=402,o.param=n,o;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)}),updateIntent:(e=l()(i.a.mark((function t(e){var r,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.u)("put","/intent",e);case 2:if(!(r=t.sent).errors){t.next=10;break}throw n=Object.keys(r.errors)[0],(o=new Error(r.errors[n].message||"Unknown error")).code="vault_error",o.status=402,o.param=n,o;case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})};var e,r,n,o,a}function It(t,e,r,n){return qt.apply(this,arguments)}function qt(){return(qt=l()(i.a.mark((function t(e,r,n,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.card){t.next=17;break}if(n.card){t.next=5;break}console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."),t.next=17;break;case 5:if("braintree"!==n.card.gateway){t.next=11;break}if(window.braintree){t.next=9;break}return t.next=9,Ut("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js");case 9:t.next=17;break;case 11:if("stripe"!==n.card.gateway){t.next=17;break}if(window.Stripe){t.next=15;break}return t.next=15,Ut("stripe-js","https://js.stripe.com/v3/");case 15:return t.next=17,Bt(e,n,o);case 17:if(!o.ideal){t.next=32;break}if(n.card){t.next=22;break}console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."),t.next=32;break;case 22:if(n.ideal){t.next=26;break}console.error("Payment element error: iDEAL payments are disabled. See Payment settings in the Swell dashboard for details."),t.next=32;break;case 26:if("stripe"!==n.card.gateway){t.next=32;break}if(window.Stripe){t.next=30;break}return t.next=30,Ut("stripe-js","https://js.stripe.com/v3/");case 30:return t.next=32,Bt(e,n,o);case 32:if(!o.paypal){t.next=49;break}if(n.paypal){t.next=37;break}console.error("Payment element error: PayPal payments are disabled. See Payment settings in the Swell dashboard for details."),t.next=49;break;case 37:if(window.paypal){t.next=40;break}return t.next=40,Ut("paypal-sdk","https://www.paypal.com/sdk/js?client-id=".concat(n.paypal.client_id,"&merchant-id=").concat(n.paypal.merchant_id,"&vault=true"));case 40:if(!n.card||"braintree"!==n.card.gateway||"braintree"!==n.paypal.gateway){t.next=49;break}if(window.braintree){t.next=44;break}return t.next=44,Ut("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js");case 44:if(!window.braintree||window.braintree.paypalCheckout){t.next=47;break}return t.next=47,Ut("braintree-web-paypal-checkout","https://js.braintreegateway.com/web/3.57.0/js/paypal-checkout.min.js");case 47:return t.next=49,Mt(e,r,n,o);case 49:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ut=function(){var t=l()(i.a.mark((function t(e,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ct[e]=Ct[e]||new Promise((function(t){var n=document.createElement("script");n.id=e,n.src=r,n.async=!0,n.type="text/javascript",n.addEventListener("load",(function(){t(),Ct[e]=null}),{once:!0}),document.head.appendChild(n)})),t.abrupt("return",Ct[e]);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function Bt(t,e,r){return Lt.apply(this,arguments)}function Lt(){return(Lt=l()(i.a.mark((function t(e,r,n){var o,a,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r.card.publishable_key,a=window.Stripe(o),c=a.elements(),u=function(t){var e=et()(n,"card[".concat(t,"]"))||n.card||n.ideal,r=e.options||{},o=c.create(t,r);o.mount(e.elementId||"#".concat(t,"-element")),e.onChange&&o.on("change",e.onChange),e.onReady&&o.on("ready",e.onReady),e.onFocus&&o.on("focus",e.onFocus),e.onBlur&&o.on("blur",e.onBlur),e.onEscape&&o.on("escape",e.onEscape),e.onClick&&o.on("click",e.onClick),"card"!==t&&"cardNumber"!==t&&"idealBank"!==t||(Rt.stripe=o)},Tt.stripe=a,n.ideal?u("idealBank"):n.card.separateElements?(u("cardNumber"),u("cardExpiry"),u("cardCvc")):u("card");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mt(t,e,r,n){return Yt.apply(this,arguments)}function Yt(){return(Yt=l()(i.a.mark((function t(e,r,n,o){var a,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.u)("post","/authorization",{gateway:"braintree"});case 2:if(!(a=t.sent).error){t.next=5;break}throw new Error(a.error);case 5:c=window.braintree,u=window.paypal,c.client.create({authorization:a}).then((function(t){return c.paypalCheckout.create({client:t})})).then((function(t){return u.Buttons({style:o.paypal.style||{},createBillingAgreement:function(){return t.createPayment({flow:"vault",currency:r.currency,amount:r.grand_total})},onApprove:function(r,n){return t.tokenizePayment(r).then((function(t){var r=t.nonce;return J.methods(e).update({billing:{paypal:{nonce:r}}})})).then((function(){return Object(p.g)(o.paypal.onSuccess)&&o.paypal.onSuccess(r,n)})).catch(Object(p.g)(o.paypal.onError)?o.paypal.onError:function(t){return console.error("PayPal error",t)})},onCancel:Object(p.g)(o.paypal.onCancel)?function(){return o.paypal.onCancel()}:function(){return console.log("PayPal payment cancelled")},onError:Object(p.g)(o.paypal.onError)?function(t){return o.paypal.onError(t)}:function(t){return console.error("PayPal error",t)}}).render(o.paypal.elementId||"#paypal-button")})).catch(Object(p.g)(o.paypal.onError)?o.paypal.onError:function(t){return console.error("PayPal error",t)});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(t,e,r,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=l()(i.a.mark((function t(e,r,n,o){var a,c,u,s,f,l,h,d,y,g,v,m,b,w,O,x,j,_,k,S,E,P,A,C,R,T,D;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(t){var e=et()(r,"card.onError")||et()(r,"ideal.onError")||et()(r,"klarna.onError")||et()(r,"bancontact.onError");if(Object(p.g)(e))return e(t);throw new Error(t.message)},r){t.next=3;break}return t.abrupt("return",a({message:"Tokenization parameters not passed"}));case 3:if(!r.card||!n.card){t.next=33;break}if("stripe"!==n.card.gateway||!Rt.stripe||!Tt.stripe){t.next=31;break}return c=Tt.stripe,t.next=8,wt(c,Rt.stripe,o);case 8:if(!(u=t.sent).error){t.next=11;break}return t.abrupt("return",a(u.error));case 11:return s=100*et()(o,"grand_total",0),f=nt()(et()(o,"currency","usd")),l=et()(o,"account.stripe_customer"),t.next=16,Dt(e).createIntent({gateway:"stripe",intent:At({payment_method:u.token,amount:s,currency:f,capture_method:"manual",setup_future_usage:"off_session"},l?{customer:l}:{})}).catch((function(t){return a(t)}));case 16:if(!(h=t.sent)||"requires_confirmation"!==h.status){t.next=31;break}return t.next=20,c.confirmCardPayment(h.client_secret);case 20:if(d=t.sent,y=d.paymentIntent,!(g=d.error)){t.next=27;break}t.t0=a(g),t.next=30;break;case 27:return t.next=29,J.methods(e).update({billing:{method:"card",card:u,intent:{stripe:{id:y.id}}}}).then((function(){return Object(p.g)(r.card.onSuccess)&&r.card.onSuccess()})).catch((function(t){return a(t)}));case 29:t.t0=t.sent;case 30:return t.abrupt("return",t.t0);case 31:t.next=89;break;case 33:if(!r.ideal||!n.ideal){t.next=58;break}if(!(n.card&&"stripe"===n.card.gateway&&Rt.stripe&&Tt.stripe)){t.next=56;break}return t.next=37,xt(Tt.stripe,Rt.stripe,o.billing);case 37:if(v=t.sent,m=v.error,b=v.paymentMethod,!m){t.next=42;break}return t.abrupt("return",a(m));case 42:return w=100*et()(o,"grand_total",0),O=nt()(et()(o,"currency","eur")),t.next=46,Dt(e).createIntent({gateway:"stripe",intent:{payment_method:b.id,amount:w,currency:O,payment_method_types:"ideal",confirmation_method:"manual",confirm:!0,return_url:window.location.href}}).catch((function(t){return a(t)}));case 46:if(!(x=t.sent)){t.next=56;break}return t.next=50,J.methods(e).update({billing:{method:"ideal",ideal:{token:b.id},intent:{stripe:{id:x.id}}}}).catch((function(t){return a(t)}));case 50:if(t.t1="requires_action"===x.status||"requires_source_action"===x.status,!t.t1){t.next=55;break}return t.next=54,Tt.stripe.handleCardAction(x.client_secret);case 54:t.t1=t.sent;case 55:return t.abrupt("return",t.t1);case 56:t.next=89;break;case 58:if(!r.klarna||!n.klarna){t.next=76;break}if(!n.card||"stripe"!==n.card.gateway){t.next=74;break}if(window.Stripe){t.next=63;break}return t.next=63,Ut("stripe-js","https://js.stripe.com/v3/");case 63:return j=n.card.publishable_key,_=window.Stripe(j),t.next=67,W.methods(e).get();case 67:return k=t.sent,t.next=70,_t(_,At(At({},o),{},{settings:k.store}));case 70:return S=t.sent,E=S.error,P=S.source,t.abrupt("return",E?a(E):J.methods(e).update({billing:{method:"klarna"}}).then((function(){return window.location.replace(P.redirect.url)})).catch((function(t){return a(t)})));case 74:t.next=89;break;case 76:if(!r.bancontact||!n.bancontact){t.next=89;break}if(!n.card||"stripe"!==n.card.gateway){t.next=89;break}if(window.Stripe){t.next=81;break}return t.next=81,Ut("stripe-js","https://js.stripe.com/v3/");case 81:return A=n.card.publishable_key,C=window.Stripe(A),t.next=85,St(C,o);case 85:return R=t.sent,T=R.error,D=R.source,t.abrupt("return",T?a(T):J.methods(e).update({billing:{method:"bancontact"}}).then((function(){return window.location.replace(D.redirect.url)})).catch((function(t){return a(t)})));case 89:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var $t=Dt;var zt=function(t,e){return{code:null,state:null,locale:null,formatter:null,list:function(){return e.api.settings.get("store.currencies",[])},select:(r=l()(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.set(r),v("swell-currency",r),e.next=4,t("put","/session",{currency:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(t){return r.apply(this,arguments)}),selected:function(){if(this.code)return this.code;var t=e.api.settings.get("store.currency");return g("swell-currency")||t},get:function(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set:function(t){this.code=t,this.locale=e.api.settings.get("store.locale","object"===("undefined"==typeof navigator?"undefined":b()(navigator))?navigator.language:"en-US"),this.state=Object(p.d)(this.list(),{code:t})||{};try{this.formatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:t,currencyDisplay:"symbol",minimumFractionDigits:this.state.decimals,maximumFractionDigits:this.state.decimals})}catch(t){console.error(t)}return this.state},format:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.get();if(e.code&&e.code!==r.code){var n=this.list();r=Object(p.d)(n,{code:e.code})||{}}var o,i=r,a=i.code,c=i.rate,u=i.decimals,s=i.type,f=e.code||a,l=e.rate||c,h=e.locale||this.locale,d="number"==typeof e.decimals?e.decimals:u,y=t;"display"!==s&&!e.rate||"number"!=typeof l||(y=t*l);try{return o=f===this.state.code&&h===this.locale&&d===this.state.decimals?this.formatter:new Intl.NumberFormat(h,{style:"currency",currency:f,currencyDisplay:"symbol",minimumFractionDigits:d,maximumFractionDigits:d}),"number"==typeof y?o.format(y):Object(p.e)(o.formatToParts(0),"0.value","$")}catch(t){console.error(t)}return String(t)}};var r};function Gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(r),!0).forEach((function(e){s()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Vt={store:null,key:null,url:null,useCamelCase:null,previewContent:null},Xt={options:Vt,request:Kt,init:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vt.key=e,Vt.store=t,Vt.url=r.url?Object(p.r)(r.url):"https://".concat(t,".swell.store"),Vt.vaultUrl=r.vaultUrl?Object(p.r)(r.vaultUrl):"https://vault.schema.io",Vt.timeout=r.timeout&&parseInt(r.timeout,10)||2e4,Vt.useCamelCase=r.useCamelCase||!1,Vt.previewContent=r.previewContent||!1,Vt.api=Xt,Object(p.l)(Vt)},auth:function(){return this.init.apply(this,arguments)},get:function(t,e){return Kt("get",t,e)},put:function(t,e){return Kt("put",t,e)},post:function(t,e){return Kt("post",t,e)},delete:function(t,e){return Kt("delete",t,e)},cache:P,card:h,cart:J(Kt,Vt),account:V(Kt,Vt),products:$(Kt,Vt),categories:X(Kt,Vt),attributes:K(Kt,Vt),subscriptions:Z(Kt,Vt),content:Q(Kt,Vt),settings:W(Kt,Vt),payment:$t(Kt,Vt),currency:zt(Kt,Vt)};function Kt(t,e){return Zt.apply(this,arguments)}function Zt(){return(Zt=l()(i.a.mark((function t(e,r){var n,o,a,u,s,f,l,h,d,y,m,b,w,O,x,j,_,k,S,E,P=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=P.length>2&&void 0!==P[2]?P[2]:void 0,o=P.length>3&&void 0!==P[3]?P[3]:void 0,a=P.length>4&&void 0!==P[4]?P[4]:void 0,u=String(e).toLowerCase(),s=r,f=n,void 0===o&&"string"!=typeof n||(s=[Object(p.r)(r),Object(p.s)(n)].join("/"),f=o),l=Jt(Jt({},Vt),a),h="".concat(l.url).concat(l.base||"","/api"),s=l.fullUrl||"".concat(h,"/").concat(Object(p.q)(s)),f=l.useCamelCase?Object(p.p)(f):f,"get"===u?(m=s.split("?"),b=c()(m,2),s=b[0],y=b[1],w=[y,Object(p.m)(f)].join("&").replace(/^&/,""),s="".concat(s).concat(w?"?".concat(w):"")):d=JSON.stringify(f),O=g("swell-session"),x=Jt({"Content-Type":"application/json",Authorization:"Basic ".concat(Object(p.a)(String(l.key)))},O?{"X-Session":O}:{}),t.next=16,fetch(s,{method:u,headers:x,body:d,credentials:"include",mode:"cors"});case 16:return j=t.sent,"string"==typeof(_=j.headers.get("X-Session"))&&O!==_&&v("swell-session",_),t.next=21,j.json();case 21:if(!(k=t.sent)||!k.error){t.next=30;break}throw(S=new Error(k.error.message)).status=j.status,S.code=k.error.code,S.param=k.error.param,S;case 30:if(j.ok){t.next=34;break}throw(E=new Error("A connection error occurred while making the request")).code="connection_error",E;case 34:return t.abrupt("return",Vt.useCamelCase?Object(p.n)(k):k);case 35:case"end":return t.stop()}}),t)})))).apply(this,arguments)}"undefined"!=typeof window&&(window.swell={version:"@VERSION@"});e.default=Xt}])}));
//# sourceMappingURL=swell-js.js.map